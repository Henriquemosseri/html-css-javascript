<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Atividade 1</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <header>
        <h1>Bem-vindo ao site</h1>
    </header>
    <nav>
        <a href="">link 1</a>
        <a href="">link 2</a>
        <a href="">link 3</a>
    </nav>


    <main id="main">
        <section id="section1">
            <h2 class="subtitulo">Lorem ipsum dolor sit amet consectetur,</h2>
            <p id="paragrafo">Lorem ipsum dolor sit amet consectetur adipisicing elit. Porro exercitationem omnis minus
                obcaecati natus veniam libero perspiciatis quibusdam maxime culpa sed rem aliquam fugit, ut repellendus
                aliquid! Doloremque nemo minima quia labore, dolore expedita itaque quo doloribus, hic totam laboriosam
                id, ratione error adipisci cupiditate neque placeat laborum molestiae nihil!</p>
            <button onclick="mudarCor()" class="botoes"><b> mudar cor</b></button>
            <br>

            <label for="item-lista">Insira na lista abaixo <input type="text" name="item-lista" id="item-lista"></label>
            <button onclick="criarLista()" class="botoes">criar lista</button>
            <ul id="lista">
            </ul>
        </section>
            <div>
                <p id="testeAPI"></p>

                <form id="cadastroForm">
                    <label for="">Digite seu nome: <input type="text" id="nome" required></label>
                    <label for="">Digite seu email: <input type="text" id="email" required></label>
                    <button type="submit" class="botoes" >enviar</button>
                </form>
            </div>


    </main>

    <footer id="footer">
        <p>Autor: Henrique Mosseri</p>
        <p> 2025</p>
    </footer>

</body>
<script>
    removerItemLista();
    testeFetch();
     // URL do Mockable.io
     const API_URL = "http://demo8131881.mockable.io/cadastro"; 

// Captura do evento de envio do formulário
document.getElementById("cadastroForm").addEventListener("submit", function(event) {
    event.preventDefault();
    enviarDados();
});

// Função para capturar os dados do formulário
function capturarDados() {
    return {
        nome: document.getElementById("nome").value,
        email: document.getElementById("email").value
    };
}

// Função para enviar os dados para a API
async function enviarDados() {
    const dados = capturarDados();

    try {
        const response = await fetch(API_URL, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(dados)
        });

        const data = await response.json();
        mostrarResposta(data);
    } catch (error) {
        console.error("Erro ao enviar dados:", error);
    }
}

// Função para exibir a resposta do servidor
function mostrarResposta(data) {
    alert(data.msg); // Exibe na tela
    console.log("Resposta do servidor:", data); // Exibe no console
}


    function mudarCor() {
        let textElement = document.getElementById("paragrafo");
        textElement.style.color = "red";
    }

    function criarLista() {
        let itemLista = document.getElementById("item-lista").value;
        var item = document.createElement("li");
        item.append(itemLista);
        document.getElementById("lista").append(item);
    }
    function removerItemLista() {
        document.getElementById("lista").addEventListener("dblclick", function (event) {
            if (event.target.tagName === "LI") {
                event.target.remove();
            }
        });
    }

    function testeFetch(){
        fetch("http://demo8131881.mockable.io/teste")
        .then(response=> response.json())
        .then(data=>mostrarDado(data))
        .catch(error => console.log(error))
        }

    function mostrarDado(data){
    document.getElementById("testeAPI").innerText= data.msg;
    }
</script>

</html>